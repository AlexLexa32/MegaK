//игра в кансоле на C++
#include <vector>
#include <iostream>
#include <thread>
#include <chrono>
using namespace std;

int n = 8, m = 81, x = 20, y = 3;

bool game = true;

char T;

vector<vector<char> > t(n, vector<char> (m, ' ')); 
vector<vector<char> > d(n, vector<char> (m, ' ')); 

void rendering() {
    for (int i = 0; i<n; i++) {
        for (int j = 0; j<m; j++) {
            cout << t[i][j];
        }
        cout << endl;
    }
}

void game_over() {
    for (int i = 0; i<n; i++) {
        for (int j = 0; j<m; j++) {
            t[i][j] = ' ';
        }
    }
    m = 41;
    
    //G
    t[3][1] = '_';
    t[4][0] = '/';
    t[5][0] = '|';
    t[6][0] = '|';
    t[7][0] = '|';
    t[7][1] = '_';
    t[7][2] = '/';
    t[6][2] = '|';
    t[5][2] = '_';
    //a
    t[7][4] = '|';
    t[6][4] = '|';
    t[5][4] = '/';
    t[4][5] = '_';
    t[4][6] = '_';
    t[4][7] = '_';
    t[5][7] = '|';
    t[6][7] = '|';
    t[7][7] = '|';
    t[7][5] = '_';
    t[7][6] = '/';
    //m
    t[7][9] = '|';
    t[6][9] = '|';
    t[5][9] = '|';
    t[4][9] = '|';
    t[4][10] = '_';
    t[4][11] = '_';
    t[4][12] = '_';
    t[4][13] = '_';
    t[5][13] = '|';
    t[6][13] = '|';
    t[7][13] = '|';
    t[5][11] = '|';
    t[6][11] = '|';
    t[7][11] = '|';
    //E
    t[4][15] = '|';
    t[5][15] = '|';
    t[6][15] = '|';
    t[7][15] = '|';
    t[3][15] = '_';
    t[3][16] = '_';
    t[3][17] = '_';
    t[5][16] = '_';
    t[5][17] = '_';
    t[7][16] = '_';
    t[7][17] = '_';
    //o
    t[7][21] = '|';
    t[6][21] = '|';
    t[5][21] = '|';
    t[4][21] = '|';
    t[7][24] = '|';
    t[6][24] = '|';
    t[5][24] = '|';
    t[4][24] = '|';
    t[3][22] = '_';
    t[3][23] = '_';
    t[7][22] = '_';
    t[7][23] = '_';
    //v
    t[7][28] = '_';
    t[7][27] = '(';
    t[6][27] = '(';
    t[5][26] = '(';
    t[4][26] = '(';
    t[7][29] = ')';
    t[6][29] = ')';
    t[5][30] = ')';
    t[4][30] = ')';
    //E
    t[4][33] = '|';
    t[5][33] = '|';
    t[6][33] = '|';
    t[7][33] = '|';
    t[3][33] = '_';
    t[3][34] = '_';
    t[3][35] = '_';
    t[5][34] = '_';
    t[5][35] = '_';
    t[7][34] = '_';
    t[7][35] = '_';
    //r
    t[7][37] = '|';
    t[6][37] = '|';
    t[5][37] = '|';
    t[4][37] = '|';
    t[3][38] = '_';
    t[3][39] = '_';
    t[4][40] = '|';
    for (int i = 0; i<n; i++) {
        for (int j = 0; j<m; j++) {
            cout << t[i][j] << ' ';
        }
        cout << endl;
    }
    game = false;
}

void gravity() {
    while (d[y][x]!='_' and game) {
        t[y][x] = d[y][x];
        y++;
        t[y][x] = '#';
        rendering();
        this_thread::sleep_for(chrono::nanoseconds(500000001));
    }
}

int main()
{
    //прорисовка игравого поля
    for (int i = 0; i<m; i++) {
        t[n-1][i] = '_';
        d[n-1][i] = '_';
    }
    for (int i = 11; i<=30; i++) {
        t[n-4][i] = '_';
        d[n-4][i] = '_';
    }
    for (int i = 23; i<=37; i++) {
        t[n-7][i] = '_';
        d[n-7][i] = '_';
    }
    for (int i = 50; i<=70; i++) {
        t[n-4][i] = '_';
        d[n-4][i] = '_';
    }
    t[n-1][19] = '|';
    d[n-1][19] = '|';
    t[n-1][58] = '|';
    d[n-1][58] = '|';
    //---------------------------------------------------------------------------------------
    t[y][x] = '#';
    while (game) {
        rendering();
        cin >> T;
        t[y][x] = d[y][x];
        switch (T) {
            case 'l':
            x++;
            break;
            case 'j':
            x--;
            break;
            case 'i':
            y-=3;
            break;
            case 'k':
            y+=1;
            break;
        }
        if (x>=m || x<0 || y<0 || y>=n || d[y][x] == '|') {
            game_over();
        }
        t[y][x] = '#';
        gravity();
    }

    return 0;
    
}
